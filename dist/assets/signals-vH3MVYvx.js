import{j as e}from"./ui-vendor-mfLK6kkQ.js";import{r as j}from"./react-vendor--0RGCJ5T.js";import{b as $,a as Q,d as k,e as R,D as J,z as U,g as T,E as G,F as Y,G as W,H as X,I as n,J as D,K as Z,j as c,k as d,T as B,s as A,m as _,n as E,o as L,B as q}from"./index-DMUxz8dE.js";import{S as ee}from"./Sidebar-CWwWAgFd.js";import{T as se,a as ae,b as w,c as o,d as le,e as r}from"./table-C5Wewpyf.js";import{S as p,a as u,b as g,c as y,d as i}from"./select-Brp6yn3A.js";import{A as O}from"./activity-Dkd0t9nU.js";import{S as H}from"./send-y-4Jk6HA.js";import{F as ie}from"./filter-B2qU7OG2.js";import"./chart-vendor-CJvGuOij.js";import"./dollar-sign-BsbVyGJM.js";import"./message-square-DEryHNXU.js";import"./file-text-CVGYDGjh.js";import"./index-BdQq_4o_.js";import"./index-BBVDPgwe.js";import"./chevron-down-BE_ioXd1.js";function be(){const{toast:C}=$(),I=Q(),[M,f]=j.useState(!1),[N,V]=j.useState("all"),[b,z]=j.useState("all"),[l,x]=j.useState({ticker:"",signalType:"buy",price:0,note:""}),v=localStorage.getItem("token"),{data:a,isLoading:K}=k({queryKey:["/api/signals"],queryFn:async()=>{const s=await fetch("/api/signals?limit=100",{headers:{Authorization:`Bearer ${v}`}});if(!s.ok)throw new Error("Failed to fetch signals");return await s.json()}}),{data:t}=k({queryKey:["/api/admin/tickers"],queryFn:async()=>{const s=await fetch("/api/admin/tickers",{headers:{Authorization:`Bearer ${v}`}});if(!s.ok)throw new Error("Failed to fetch tickers");return await s.json()}}),F=R({mutationFn:async s=>{const m=await fetch("/api/admin/signals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify(s)});if(!m.ok)throw new Error("Failed to create signal");return await m.json()},onSuccess:()=>{I.invalidateQueries({queryKey:["/api/signals"]}),x({ticker:"",signalType:"buy",price:0,note:""}),f(!1),C({title:"Signal created successfully"})},onError:()=>{C({title:"Failed to create signal",variant:"destructive"})}}),S=a==null?void 0:a.filter(s=>{const m=N==="all"||s.signalType===N,P=b==="all"||s.ticker===b;return m&&P}),h={total:(a==null?void 0:a.length)||0,buy:(a==null?void 0:a.filter(s=>s.signalType==="buy").length)||0,sell:(a==null?void 0:a.filter(s=>s.signalType==="sell").length)||0,today:(a==null?void 0:a.filter(s=>new Date(s.timestamp).toDateString()===new Date().toDateString()).length)||0};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"flex",children:[e.jsx(ee,{}),e.jsxs("div",{className:"ml-64 flex-1",children:[e.jsx("header",{className:"bg-card border-b border-border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:"h-6 w-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Signal Logs"})]}),e.jsxs(J,{open:M,onOpenChange:f,children:[e.jsx(U,{asChild:!0,children:e.jsxs(T,{className:"crypto-gradient text-white",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Create Signal"]})}),e.jsxs(G,{children:[e.jsxs(Y,{children:[e.jsx(W,{children:"Create Trading Signal"}),e.jsx(X,{children:"Manually inject a trading signal to all subscribers"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"ticker",children:"Ticker"}),e.jsxs(p,{value:l.ticker,onValueChange:s=>x({...l,ticker:s}),children:[e.jsx(u,{children:e.jsx(g,{placeholder:"Select ticker"})}),e.jsx(y,{children:t==null?void 0:t.map(s=>e.jsxs(i,{value:s.symbol,children:[s.symbol," - ",s.description]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"signalType",children:"Signal Type"}),e.jsxs(p,{value:l.signalType,onValueChange:s=>x({...l,signalType:s}),children:[e.jsx(u,{children:e.jsx(g,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"buy",children:"Buy"}),e.jsx(i,{value:"sell",children:"Sell"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"price",children:"Price"}),e.jsx(D,{id:"price",type:"number",step:"0.01",value:l.price,onChange:s=>x({...l,price:parseFloat(s.target.value)}),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"note",children:"Note (Optional)"}),e.jsx(D,{id:"note",value:l.note,onChange:s=>x({...l,note:s.target.value}),placeholder:"Additional information..."})]})]}),e.jsxs(Z,{children:[e.jsx(T,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsxs(T,{onClick:()=>F.mutate(l),disabled:F.isPending,className:"crypto-gradient text-white",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Send Signal"]})]})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(c,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Signals"}),e.jsx("p",{className:"text-2xl font-bold",children:h.total})]}),e.jsx(O,{className:"h-8 w-8 text-foreground"})]})})}),e.jsx(c,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Buy Signals"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:h.buy})]}),e.jsx(B,{className:"h-8 w-8 text-emerald-400"})]})})}),e.jsx(c,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sell Signals"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:h.sell})]}),e.jsx(A,{className:"h-8 w-8 text-red-400"})]})})}),e.jsx(c,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Today"}),e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:h.today})]}),e.jsx(_,{className:"h-8 w-8 text-blue-400"})]})})})]}),e.jsxs(c,{children:[e.jsx(E,{children:e.jsxs(L,{className:"flex items-center",children:[e.jsx(ie,{className:"mr-2 h-5 w-5"}),"Filters"]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Signal Type"}),e.jsxs(p,{value:N,onValueChange:s=>V(s),children:[e.jsx(u,{className:"w-32",children:e.jsx(g,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"All"}),e.jsx(i,{value:"buy",children:"Buy"}),e.jsx(i,{value:"sell",children:"Sell"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Ticker"}),e.jsxs(p,{value:b,onValueChange:z,children:[e.jsx(u,{className:"w-40",children:e.jsx(g,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"All Tickers"}),t==null?void 0:t.map(s=>e.jsx(i,{value:s.symbol,children:s.symbol},s.id))]})]})]})]})})]}),e.jsxs(c,{children:[e.jsx(E,{children:e.jsx(L,{children:"Recent Signals"})}),e.jsx(d,{children:e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs(w,{children:[e.jsx(o,{children:"Ticker"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Price"}),e.jsx(o,{children:"Time"}),e.jsx(o,{children:"Source"}),e.jsx(o,{children:"Note"})]})}),e.jsx(le,{children:K?e.jsx(w,{children:e.jsx(r,{colSpan:6,className:"text-center py-8",children:"Loading signals..."})}):S==null?void 0:S.map(s=>e.jsxs(w,{children:[e.jsx(r,{className:"font-semibold",children:s.ticker}),e.jsx(r,{children:e.jsx(q,{variant:s.signalType==="buy"?"default":"destructive",className:s.signalType==="buy"?"bg-emerald-500":"bg-red-500",children:s.signalType==="buy"?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-1 h-3 w-3"})," BUY"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-1 h-3 w-3"})," SELL"]})})}),e.jsxs(r,{className:"font-mono",children:["$",s.price]}),e.jsx(r,{children:new Date(s.timestamp).toLocaleString()}),e.jsx(r,{children:e.jsx(q,{variant:"outline",children:s.source})}),e.jsx(r,{className:"text-muted-foreground",children:s.note||"â€”"})]},s.id))})]})})]})]})]})]})})}export{be as default};
//# sourceMappingURL=signals-vH3MVYvx.js.map
