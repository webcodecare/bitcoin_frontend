import{j as e}from"./ui-vendor-mfLK6kkQ.js";import{r as g}from"./react-vendor--0RGCJ5T.js";import{b as se,a as ie,d as k,e as y,U as ae,j as f,k as v,n as C,o as F,y as O,B as te,g as d,D as U,z as q,P as ne,E as M,F as P,G as $,H as z,I as h,J as b,K as L}from"./index-DMUxz8dE.js";import{S as re,a as le}from"./Sidebar-CWwWAgFd.js";import{S as K,a as Q,b as H,c as J,d as A}from"./select-Brp6yn3A.js";import{S as E}from"./switch-6PBAG7U5.js";import{T as R,a as V,b as S,c as t,d as _,e as n}from"./table-C5Wewpyf.js";import{A as ce}from"./activity-Dkd0t9nU.js";import{D as oe}from"./dollar-sign-BsbVyGJM.js";import{S as de}from"./server-O5hvHHC7.js";import{C as he}from"./circle-check-big-DJe8srSt.js";import{C as me}from"./circle-x-CG5ILRXV.js";import{T as xe}from"./trash-2-DEwSYusZ.js";import{S as je}from"./send-y-4Jk6HA.js";import"./chart-vendor-CJvGuOij.js";import"./message-square-DEryHNXU.js";import"./file-text-CVGYDGjh.js";import"./index-BdQq_4o_.js";import"./index-BBVDPgwe.js";import"./chevron-down-BE_ioXd1.js";function qe(){const{toast:r}=se(),u=ie(),[a,j]=g.useState({ticker:"",signalType:"buy",price:0,note:""}),[l,p]=g.useState({symbol:"",description:"",isEnabled:!0}),[G,D]=g.useState(!1),[X,I]=g.useState(!1),c=localStorage.getItem("auth_token"),{data:m,isLoading:W}=k({queryKey:["/api/admin/users"],queryFn:async()=>{const s=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${c}`}});if(!s.ok)throw new Error("Failed to fetch users");return await s.json()}}),{data:x,isLoading:Y}=k({queryKey:["/api/admin/tickers"],queryFn:async()=>{const s=await fetch("/api/admin/tickers",{headers:{Authorization:`Bearer ${c}`}});if(!s.ok)throw new Error("Failed to fetch tickers");return await s.json()}}),{data:w,isLoading:ue}=k({queryKey:["/api/signals"],queryFn:async()=>{const s=await fetch("/api/signals?limit=20",{headers:{Authorization:`Bearer ${c}`}});if(!s.ok)throw new Error("Failed to fetch signals");return await s.json()}}),B=y({mutationFn:async({userId:s,updates:i})=>{const o=await fetch(`/api/admin/users/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(i)});if(!o.ok)throw new Error("Failed to update user");return await o.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/admin/users"]}),r({title:"User updated successfully"})},onError:()=>{r({title:"Failed to update user",variant:"destructive"})}}),N=y({mutationFn:async s=>{const i=await fetch("/api/admin/tickers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(s)});if(!i.ok)throw new Error("Failed to create ticker");return await i.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/admin/tickers"]}),p({symbol:"",description:"",isEnabled:!0}),I(!1),r({title:"Ticker created successfully"})},onError:()=>{r({title:"Failed to create ticker",variant:"destructive"})}}),Z=y({mutationFn:async({tickerId:s,updates:i})=>{const o=await fetch(`/api/admin/tickers/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(i)});if(!o.ok)throw new Error("Failed to update ticker");return await o.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/admin/tickers"]}),r({title:"Ticker updated successfully"})},onError:()=>{r({title:"Failed to update ticker",variant:"destructive"})}}),T=y({mutationFn:async s=>{const i=await fetch("/api/admin/signals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(s)});if(!i.ok)throw new Error("Failed to create signal");return await i.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/signals"]}),j({ticker:"",signalType:"buy",price:0,note:""}),D(!1),r({title:"Signal injected successfully"})},onError:()=>{r({title:"Failed to inject signal",variant:"destructive"})}}),ee=[{title:"Total Users",value:(m==null?void 0:m.length.toString())||"0",icon:ae,color:"text-foreground"},{title:"Active Signals",value:(w==null?void 0:w.length.toString())||"0",icon:ce,color:"text-emerald-400"},{title:"Revenue",value:"$45,678",icon:oe,color:"text-emerald-400"},{title:"System Status",value:"Online",icon:de,color:"text-emerald-400"}];return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"flex",children:[e.jsx(re,{}),e.jsxs("div",{className:"ml-64 flex-1",children:[e.jsx("header",{className:"bg-card border-b border-border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last login: 2h ago"}),e.jsx("div",{className:"w-8 h-8 bg-destructive rounded-full flex items-center justify-center text-destructive-foreground font-semibold",children:"A"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:ee.map((s,i)=>{const o=s.icon;return e.jsx(f,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s.title}),e.jsx("p",{className:`text-2xl font-bold ${s.color}`,children:s.value})]}),e.jsx(o,{className:`h-8 w-8 ${s.color}`})]})})},i)})}),e.jsxs(f,{children:[e.jsx(C,{children:e.jsx(F,{children:"User Management"})}),e.jsx(v,{children:W?e.jsx("div",{className:"space-y-4",children:Array.from({length:5},(s,i)=>e.jsx(O,{className:"h-12 w-full"},i))}):e.jsxs(R,{children:[e.jsx(V,{children:e.jsxs(S,{children:[e.jsx(t,{children:"User"}),e.jsx(t,{children:"Role"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Created"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(_,{children:m==null?void 0:m.map(s=>e.jsxs(S,{children:[e.jsx(n,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.email})]})}),e.jsx(n,{children:e.jsx(te,{variant:s.role==="admin"?"default":"secondary",children:s.role})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{checked:s.isActive,onCheckedChange:i=>B.mutate({userId:s.id,updates:{isActive:i}})}),e.jsx("span",{className:"text-sm",children:s.isActive?"Active":"Inactive"})]})}),e.jsx(n,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(n,{children:e.jsx(d,{variant:"outline",size:"sm",onClick:()=>B.mutate({userId:s.id,updates:{role:s.role==="admin"?"user":"admin"}}),children:s.role==="admin"?"Remove Admin":"Make Admin"})})]},s.id))})]})})]}),e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{children:"Manage Available Tickers"}),e.jsxs(U,{open:X,onOpenChange:I,children:[e.jsx(q,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Add Ticker"]})}),e.jsxs(M,{children:[e.jsxs(P,{children:[e.jsx($,{children:"Add New Ticker"}),e.jsx(z,{children:"Add a new cryptocurrency ticker to the platform."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"symbol",children:"Symbol"}),e.jsx(b,{id:"symbol",placeholder:"BTCUSDT",value:l.symbol,onChange:s=>p({...l,symbol:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"description",children:"Description"}),e.jsx(b,{id:"description",placeholder:"Bitcoin/USDT",value:l.description,onChange:s=>p({...l,description:s.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{checked:l.isEnabled,onCheckedChange:s=>p({...l,isEnabled:s})}),e.jsx(h,{children:"Enabled"})]})]}),e.jsx(L,{children:e.jsx(d,{onClick:()=>N.mutate(l),disabled:N.isPending,children:N.isPending?"Creating...":"Create Ticker"})})]})]})]})}),e.jsx(v,{children:Y?e.jsx("div",{className:"space-y-4",children:Array.from({length:3},(s,i)=>e.jsx(O,{className:"h-12 w-full"},i))}):e.jsxs(R,{children:[e.jsx(V,{children:e.jsxs(S,{children:[e.jsx(t,{children:"Symbol"}),e.jsx(t,{children:"Description"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(_,{children:x==null?void 0:x.map(s=>e.jsxs(S,{children:[e.jsx(n,{className:"font-semibold",children:s.symbol}),e.jsx(n,{className:"text-muted-foreground",children:s.description}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{checked:s.isEnabled,onCheckedChange:i=>Z.mutate({tickerId:s.id,updates:{isEnabled:i}})}),s.isEnabled?e.jsx(he,{className:"h-4 w-4 text-emerald-400"}):e.jsx(me,{className:"h-4 w-4 text-red-400"})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{variant:"ghost",size:"icon",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",className:"text-destructive",children:e.jsx(xe,{className:"h-4 w-4"})})]})})]},s.id))})]})})]}),e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{children:"Manual Signal Injection"}),e.jsxs(U,{open:G,onOpenChange:D,children:[e.jsx(q,{asChild:!0,children:e.jsxs(d,{variant:"destructive",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Inject Signal"]})}),e.jsxs(M,{children:[e.jsxs(P,{children:[e.jsx($,{children:"Inject Manual Signal"}),e.jsx(z,{children:"Manually inject a buy/sell signal for testing or premium users."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"ticker",children:"Ticker"}),e.jsxs(K,{value:a.ticker,onValueChange:s=>j({...a,ticker:s}),children:[e.jsx(Q,{children:e.jsx(H,{placeholder:"Select ticker"})}),e.jsx(J,{children:x==null?void 0:x.filter(s=>s.isEnabled).map(s=>e.jsxs(A,{value:s.symbol,children:[s.symbol," - ",s.description]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"signalType",children:"Signal Type"}),e.jsxs(K,{value:a.signalType,onValueChange:s=>j({...a,signalType:s}),children:[e.jsx(Q,{children:e.jsx(H,{})}),e.jsxs(J,{children:[e.jsx(A,{value:"buy",children:"Buy"}),e.jsx(A,{value:"sell",children:"Sell"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"price",children:"Price"}),e.jsx(b,{id:"price",type:"number",placeholder:"67234.56",value:a.price||"",onChange:s=>j({...a,price:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"note",children:"Note (Optional)"}),e.jsx(b,{id:"note",placeholder:"Manual signal for testing",value:a.note,onChange:s=>j({...a,note:s.target.value})})]})]}),e.jsx(L,{children:e.jsx(d,{variant:"destructive",onClick:()=>T.mutate(a),disabled:T.isPending,children:T.isPending?"Injecting...":"Inject Signal"})})]})]})]})}),e.jsx(v,{children:e.jsx("p",{className:"text-muted-foreground",children:"Use the button above to manually inject trading signals. This will broadcast to all connected users and trigger their configured alerts."})})]})]})]})]})})}export{qe as default};
//# sourceMappingURL=admin-CX6oj48H.js.map
