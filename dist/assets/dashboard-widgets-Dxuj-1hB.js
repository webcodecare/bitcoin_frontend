import{j as e,a as je,u as fe,b as ve,P as le,f as ne,d as Ne,E as ye}from"./ui-vendor-mfLK6kkQ.js";import{r as p}from"./react-vendor--0RGCJ5T.js";import{d as O,f as A,j as k,n as D,o as T,k as C,D as F,z as $,g as h,Q as M,E as W,F as E,G as I,I as S,T as z,s as B,J as te,B as H,w as K,ai as re,ae as be,l as V,m as we,P as J,af as de,b as Se,a as ke,e as Ce,H as De}from"./index-DMUxz8dE.js";import{S as _,a as Y,b as Q,c as X,d as L}from"./select-Brp6yn3A.js";import{S as U}from"./switch-6PBAG7U5.js";import{D as Z}from"./dollar-sign-BsbVyGJM.js";import{C as ee}from"./chart-pie-XpQkuyDJ.js";import{A as R}from"./activity-Dkd0t9nU.js";import{u as Te}from"./index-BBVDPgwe.js";import{C as se}from"./chart-line-BqVUJ2DR.js";import{T as G}from"./target-DyLadsKk.js";import{E as Pe}from"./external-link-BY6NX1OF.js";import"./chart-vendor-CJvGuOij.js";import"./index-BdQq_4o_.js";import"./chevron-down-BE_ioXd1.js";function Le({widget:a,onUpdateSettings:f}){const[g,d]=p.useState(!1),[s,m]=p.useState(a.settings),{data:y,isLoading:b,error:v}=O({queryKey:["/api/market/price",a.settings.ticker],queryFn:()=>A("GET",`/api/market/price/${a.settings.ticker}`),refetchInterval:5e3,retry:!1}),{data:N}=O({queryKey:["/api/chart/ohlc",a.settings.ticker],queryFn:()=>A("GET",`/api/chart/ohlc/${a.settings.ticker}?interval=1h&limit=24`),enabled:a.settings.showChart,retry:!1}),x=o=>o>=1?`$${o.toLocaleString(void 0,{maximumFractionDigits:2})}`:`$${o.toFixed(6)}`,l=o=>`${o>=0?"+":""}${o.toFixed(2)}%`,u=o=>o>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",n=()=>{f(s),d(!1)};if(b)return e.jsxs(k,{className:"h-full",children:[e.jsx(D,{className:"pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),a.title]})}),e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-32"}),e.jsx("div",{className:"h-4 bg-muted rounded w-24"})]})})]});const t=y||(o=>{const w={BTCUSDT:{price:67432.5,changePercent24h:2.45},ETHUSDT:{price:3456.78,changePercent24h:-1.23},SOLUSDT:{price:145.67,changePercent24h:4.56},ADAUSDT:{price:.456,changePercent24h:-.89},DOTUSDT:{price:7.89,changePercent24h:1.34},LINKUSDT:{price:14.23,changePercent24h:3.21}};return w[o]||w.BTCUSDT})(a.settings.ticker);return e.jsxs(k,{className:"h-full",children:[e.jsxs(D,{className:"pb-2 flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),a.settings.ticker]}),e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"Price Widget Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Cryptocurrency"}),e.jsxs(_,{value:s.ticker,onValueChange:o=>m({...s,ticker:o}),children:[e.jsx(Y,{children:e.jsx(Q,{})}),e.jsxs(X,{children:[e.jsx(L,{value:"BTCUSDT",children:"Bitcoin (BTC)"}),e.jsx(L,{value:"ETHUSDT",children:"Ethereum (ETH)"}),e.jsx(L,{value:"SOLUSDT",children:"Solana (SOL)"}),e.jsx(L,{value:"ADAUSDT",children:"Cardano (ADA)"}),e.jsx(L,{value:"DOTUSDT",children:"Polkadot (DOT)"}),e.jsx(L,{value:"LINKUSDT",children:"Chainlink (LINK)"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"show-chart",checked:s.showChart,onCheckedChange:o=>m({...s,showChart:o})}),e.jsx(S,{htmlFor:"show-chart",children:"Show mini chart"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:n,children:"Save"})]})]})]})]})]}),e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:x(t.price)}),e.jsxs("div",{className:`flex items-center gap-1 text-sm ${u(t.changePercent24h)}`,children:[t.changePercent24h>=0?e.jsx(z,{className:"h-3 w-3"}):e.jsx(B,{className:"h-3 w-3"}),l(t.changePercent24h),e.jsx("span",{className:"text-muted-foreground",children:"24h"})]}),a.settings.showChart&&N&&N.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"24h Price Chart"}),e.jsx("div",{className:"h-16 flex items-end space-x-0.5",children:N.slice(-12).map((o,w)=>{const r=Math.max(2,o.close/t.price*60),c=o.close>=o.open;return e.jsx("div",{className:`flex-1 ${c?"bg-green-500":"bg-red-500"} rounded-sm opacity-80`,style:{height:`${r}%`}},w)})})]})]})})]})}function Ae({widget:a,onUpdateSettings:f}){const[g,d]=p.useState(!1),[s,m]=p.useState(a.settings),{data:y,isLoading:b}=O({queryKey:["/api/trading/portfolio"],queryFn:()=>A("GET","/api/trading/portfolio"),retry:!1}),{data:v}=O({queryKey:["/api/trading/performance"],queryFn:()=>A("GET","/api/trading/performance"),retry:!1}),N=()=>{f(s),d(!1)};if(b)return e.jsxs(k,{className:"h-full",children:[e.jsx(D,{className:"pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Portfolio Overview"]})}),e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-32"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"})]})]})})]});const x=y||{totalValue:125430.5,totalPnL:12543.25,totalPnLPercent:11.12,positions:[{symbol:"BTCUSDT",quantity:1.5,value:75e3,allocation:59.8,pnl:8500,pnlPercent:12.8},{symbol:"ETHUSDT",quantity:15.2,value:32500,allocation:25.9,pnl:2800,pnlPercent:9.4},{symbol:"SOLUSDT",quantity:85.7,value:12430,allocation:9.9,pnl:980,pnlPercent:8.6},{symbol:"ADAUSDT",quantity:12500,value:5500,allocation:4.4,pnl:263,pnlPercent:5}]},l=v||{dailyPnL:1250.3,dailyPnLPercent:1.01,weeklyPnL:5430.8,weeklyPnLPercent:4.52,monthlyPnL:12543.25,monthlyPnLPercent:11.12},u=t=>`$${t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,n=t=>`${t>=0?"+":""}${t.toFixed(2)}%`,i=t=>t>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return e.jsxs(k,{className:"h-full",children:[e.jsxs(D,{className:"pb-2 flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Portfolio Overview"]}),e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"Portfolio Widget Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"show-allocation",checked:s.showAllocation,onCheckedChange:t=>m({...s,showAllocation:t})}),e.jsx(S,{htmlFor:"show-allocation",children:"Show allocation breakdown"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"show-pnl",checked:s.showPnL,onCheckedChange:t=>m({...s,showPnL:t})}),e.jsx(S,{htmlFor:"show-pnl",children:"Show P&L details"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:N,children:"Save"})]})]})]})]})]}),e.jsxs(C,{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Portfolio Value"}),e.jsx("div",{className:"text-2xl font-bold",children:u(x.totalValue)}),e.jsxs("div",{className:`flex items-center gap-1 text-sm ${i(x.totalPnL)}`,children:[x.totalPnL>=0?e.jsx(z,{className:"h-3 w-3"}):e.jsx(B,{className:"h-3 w-3"}),u(Math.abs(x.totalPnL))," (",n(x.totalPnLPercent),")"]})]}),s.showPnL&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Performance"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"24h"}),e.jsx("div",{className:i(l.dailyPnL),children:n(l.dailyPnLPercent)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"7d"}),e.jsx("div",{className:i(l.weeklyPnL),children:n(l.weeklyPnLPercent)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"30d"}),e.jsx("div",{className:i(l.monthlyPnL),children:n(l.monthlyPnLPercent)})]})]})]}),s.showAllocation&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Top Holdings"}),e.jsx("div",{className:"space-y-1",children:x.positions.slice(0,3).map((t,o)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary",style:{backgroundColor:`hsl(${o*60%360}, 70%, 50%)`}}),e.jsx("span",{className:"font-medium",children:t.symbol.replace("USDT","")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[t.allocation.toFixed(1),"%"]}),e.jsx("div",{className:`${i(t.pnl)} text-xs`,children:n(t.pnlPercent)})]})]},t.symbol))})]})]})]})}function Oe({widget:a,onUpdateSettings:f}){const[g,d]=p.useState(!1),[s,m]=p.useState(a.settings),{data:y,isLoading:b}=O({queryKey:["/api/signals",s.limit],queryFn:()=>A("GET",`/api/signals?limit=${s.limit}`),refetchInterval:s.autoRefresh?1e4:!1,retry:!1}),v=[{id:"1",symbol:"BTCUSDT",type:"buy",price:67500,timestamp:new Date().toISOString(),confidence:85,notes:"Strong bullish momentum"},{id:"2",symbol:"ETHUSDT",type:"sell",price:3450,timestamp:new Date(Date.now()-36e5).toISOString(),confidence:78,notes:"Resistance level reached"},{id:"3",symbol:"SOLUSDT",type:"buy",price:145,timestamp:new Date(Date.now()-72e5).toISOString(),confidence:92,notes:"Breakout pattern confirmed"}],N=y||v,x=()=>{f(s),d(!1)},l=i=>{switch(i){case"buy":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"sell":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100";case"hold":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100"}},u=i=>{switch(i){case"buy":return e.jsx(z,{className:"h-3 w-3"});case"sell":return e.jsx(B,{className:"h-3 w-3"});default:return e.jsx(R,{className:"h-3 w-3"})}},n=i=>{const t=new Date(i),w=new Date().getTime()-t.getTime(),r=Math.floor(w/6e4),c=Math.floor(r/60),j=Math.floor(c/24);return r<1?"Just now":r<60?`${r}m ago`:c<24?`${c}h ago`:`${j}d ago`};return b?e.jsxs(k,{className:"h-full",children:[e.jsx(D,{className:"pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Trading Signals"]})}),e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(i=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-6 w-12 bg-muted rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-16 mb-1"}),e.jsx("div",{className:"h-3 bg-muted rounded w-20"})]})]},i))})})]}):e.jsxs(k,{className:"h-full",children:[e.jsxs(D,{className:"pb-2 flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Trading Signals"]}),e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"Signals Widget Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Number of signals to show"}),e.jsx(te,{type:"number",min:"1",max:"20",value:s.limit,onChange:i=>m({...s,limit:parseInt(i.target.value)||5})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"auto-refresh",checked:s.autoRefresh,onCheckedChange:i=>m({...s,autoRefresh:i})}),e.jsx(S,{htmlFor:"auto-refresh",children:"Auto refresh (10s interval)"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:x,children:"Save"})]})]})]})]})]}),e.jsx(C,{className:"p-4",children:N.length===0?e.jsxs("div",{className:"text-center text-muted-foreground text-sm py-8",children:[e.jsx(R,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("div",{children:"No signals available"})]}):e.jsx("div",{className:"space-y-3",children:N.slice(0,s.limit).map((i,t)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(H,{variant:"secondary",className:`${l(i.type)} flex items-center gap-1`,children:[u(i.type),i.type.toUpperCase()]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:i.symbol}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.price&&`$${i.price.toLocaleString()}`,i.timestamp&&` • ${n(i.timestamp)}`]})]}),i.confidence&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[Math.round(i.confidence*100),"%"]})]},i.id||t))})})]})}function Fe({widget:a,onUpdateSettings:f}){const[g,d]=p.useState(!1),[s,m]=p.useState(a.settings),{data:y=[],isLoading:b}=O({queryKey:["/api/alerts"],queryFn:()=>A("GET","/api/alerts")}),v=()=>{f(s),d(!1)},N=n=>{switch(n){case"above":case"crosses_above":return e.jsx(z,{className:"h-3 w-3"});case"below":case"crosses_below":return e.jsx(B,{className:"h-3 w-3"});default:return e.jsx(K,{className:"h-3 w-3"})}},x=n=>{switch(n){case"above":case"crosses_above":return"text-green-600 dark:text-green-400";case"below":case"crosses_below":return"text-red-600 dark:text-red-400";default:return"text-blue-600 dark:text-blue-400"}},l=n=>n>=1?`$${n.toLocaleString(void 0,{maximumFractionDigits:2})}`:`$${n.toFixed(6)}`,u=s.showOnlyActive?y.filter(n=>n.enabled):y;return b?e.jsxs(k,{className:"h-full",children:[e.jsx(D,{className:"pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Active Alerts"]})}),e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(n=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-4 w-4 bg-muted rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-16 mb-1"}),e.jsx("div",{className:"h-3 bg-muted rounded w-20"})]})]},n))})})]}):e.jsxs(k,{className:"h-full",children:[e.jsxs(D,{className:"pb-2 flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Active Alerts (",u.length,")"]}),e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"Alerts Widget Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"show-only-active",checked:s.showOnlyActive,onCheckedChange:n=>m({...s,showOnlyActive:n})}),e.jsx(S,{htmlFor:"show-only-active",children:"Show only enabled alerts"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:v,children:"Save"})]})]})]})]})]}),e.jsx(C,{className:"p-4",children:u.length===0?e.jsxs("div",{className:"text-center text-muted-foreground text-sm py-8",children:[e.jsx(K,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("div",{children:"No active alerts"}),e.jsx("div",{className:"text-xs mt-1",children:"Create alerts to monitor prices"})]}):e.jsx("div",{className:"space-y-3",children:u.slice(0,5).map((n,i)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${x(n.condition)}`,children:N(n.condition)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:n.ticker}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.condition.replace("_"," ")," ",l(n.value)]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[!n.enabled&&e.jsx(H,{variant:"secondary",className:"text-xs",children:"Disabled"}),n.lastTriggered&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"Triggered"})]})]},n.id||i))})})]})}var ae="Checkbox",[$e,ns]=je(ae),[We,Ee]=$e(ae),oe=p.forwardRef((a,f)=>{const{__scopeCheckbox:g,name:d,checked:s,defaultChecked:m,required:y,disabled:b,value:v="on",onCheckedChange:N,form:x,...l}=a,[u,n]=p.useState(null),i=fe(f,j=>n(j)),t=p.useRef(!1),o=u?x||!!u.closest("form"):!0,[w=!1,r]=ve({prop:s,defaultProp:m,onChange:N}),c=p.useRef(w);return p.useEffect(()=>{const j=u==null?void 0:u.form;if(j){const P=()=>r(c.current);return j.addEventListener("reset",P),()=>j.removeEventListener("reset",P)}},[u,r]),e.jsxs(We,{scope:g,state:w,disabled:b,children:[e.jsx(le.button,{type:"button",role:"checkbox","aria-checked":q(w)?"mixed":w,"aria-required":y,"data-state":xe(w),"data-disabled":b?"":void 0,disabled:b,value:v,...l,ref:i,onKeyDown:ne(a.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:ne(a.onClick,j=>{r(P=>q(P)?!0:!P),o&&(t.current=j.isPropagationStopped(),t.current||j.stopPropagation())})}),o&&e.jsx(Ie,{control:u,bubbles:!t.current,name:d,value:v,checked:w,required:y,disabled:b,form:x,style:{transform:"translateX(-100%)"},defaultChecked:q(m)?!1:m})]})});oe.displayName=ae;var me="CheckboxIndicator",he=p.forwardRef((a,f)=>{const{__scopeCheckbox:g,forceMount:d,...s}=a,m=Ee(me,g);return e.jsx(Ne,{present:d||q(m.state)||m.state===!0,children:e.jsx(le.span,{"data-state":xe(m.state),"data-disabled":m.disabled?"":void 0,...s,ref:f,style:{pointerEvents:"none",...a.style}})})});he.displayName=me;var Ie=a=>{const{control:f,checked:g,bubbles:d=!0,defaultChecked:s,...m}=a,y=p.useRef(null),b=Te(g),v=ye(f);p.useEffect(()=>{const x=y.current,l=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(l,"checked").set;if(b!==g&&n){const i=new Event("click",{bubbles:d});x.indeterminate=q(g),n.call(x,q(g)?!1:g),x.dispatchEvent(i)}},[b,g,d]);const N=p.useRef(q(g)?!1:g);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??N.current,...m,tabIndex:-1,ref:y,style:{...a.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function q(a){return a==="indeterminate"}function xe(a){return q(a)?"indeterminate":a?"checked":"unchecked"}var ue=oe,Ue=he;const ie=p.forwardRef(({className:a,...f},g)=>e.jsx(ue,{ref:g,className:re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...f,children:e.jsx(Ue,{className:re("flex items-center justify-center text-current"),children:e.jsx(be,{className:"h-4 w-4"})})}));ie.displayName=ue.displayName;function Me({widget:a,onUpdateSettings:f}){const[g,d]=p.useState(!1),[s,m]=p.useState(a.settings),{data:y=[],isLoading:b}=O({queryKey:["/api/market/overview"],queryFn:()=>A("GET","/api/market/overview")});O({queryKey:["/api/tickers/enabled"],queryFn:()=>A("GET","/api/tickers/enabled")});const v=()=>{f(s),d(!1)},N=t=>t>=1?`$${t.toLocaleString(void 0,{maximumFractionDigits:2})}`:`$${t.toFixed(6)}`,x=t=>`${t>=0?"+":""}${t.toFixed(2)}%`,l=t=>t>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",u=t=>{const o={Major:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100",Layer1:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100",DeFi:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",Legacy:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100",Utility:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100",Emerging:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-100"};return o[t]||o.Legacy},i=[{symbol:"BTCUSDT",name:"Bitcoin",price:67890.45,change24h:2.34,volume24h:285e8,category:"Major"},{symbol:"ETHUSDT",name:"Ethereum",price:3456.78,change24h:1.87,volume24h:156e8,category:"Major"},{symbol:"SOLUSDT",name:"Solana",price:98.45,change24h:-.92,volume24h:21e8,category:"Layer1"},{symbol:"ADAUSDT",name:"Cardano",price:.4567,change24h:3.21,volume24h:89e7,category:"Layer1"},{symbol:"LINKUSDT",name:"Chainlink",price:14.23,change24h:-1.45,volume24h:456e6,category:"Utility"},{symbol:"UNIUSDT",name:"Uniswap",price:7.89,change24h:4.56,volume24h:234e6,category:"DeFi"},{symbol:"DOTUSDT",name:"Polkadot",price:5.67,change24h:-2.34,volume24h:345e6,category:"Layer1"},{symbol:"AVAXUSDT",name:"Avalanche",price:32.45,change24h:1.23,volume24h:567e6,category:"Layer1"}].filter(t=>s.categories.includes(t.category)).slice(0,s.limit);return b?e.jsxs(k,{className:"h-full",children:[e.jsx(D,{className:"pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Market Overview"]})}),e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-20 mb-1"}),e.jsx("div",{className:"h-3 bg-muted rounded w-16"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-16 mb-1"}),e.jsx("div",{className:"h-3 bg-muted rounded w-12"})]})]},t))})})]}):e.jsxs(k,{className:"h-full",children:[e.jsxs(D,{className:"pb-2 flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Market Overview"]}),e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"Market Overview Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Number of assets to show"}),e.jsx(te,{type:"number",min:"5",max:"20",value:s.limit,onChange:t=>m({...s,limit:parseInt(t.target.value)||10})})]}),e.jsxs("div",{children:[e.jsx(S,{children:"Asset Categories"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["Major","Layer1","DeFi","Legacy","Utility","Emerging"].map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{id:t,checked:s.categories.includes(t),onCheckedChange:o=>{m(o?{...s,categories:[...s.categories,t]}:{...s,categories:s.categories.filter(w=>w!==t)})}}),e.jsx(S,{htmlFor:t,className:"text-sm",children:t})]},t))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:v,children:"Save"})]})]})]})]})]}),e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:i.map((t,o)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(H,{variant:"secondary",className:`text-xs ${u(t.category)}`,children:t.symbol.replace("USDT","")}),e.jsx("div",{className:"min-w-0",children:e.jsx("div",{className:"font-medium text-sm truncate",children:t.name})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-sm",children:N(t.price)}),e.jsxs("div",{className:`flex items-center gap-1 text-xs ${l(t.change24h)}`,children:[t.change24h>=0?e.jsx(z,{className:"h-3 w-3"}):e.jsx(B,{className:"h-3 w-3"}),x(t.change24h)]})]})]},t.symbol))})})]})}function Re({widget:a,onUpdateSettings:f}){const[g,d]=p.useState(!1),[s,m]=p.useState(a.settings),{data:y,isLoading:b}=O({queryKey:["/api/trading/performance",s.timeframe],queryFn:()=>A("GET",`/api/trading/performance?timeframe=${s.timeframe}`)}),v=()=>{f(s),d(!1)},N=i=>`$${i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,x=i=>`${i>=0?"+":""}${i.toFixed(2)}%`,l=i=>i>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",n=y||{totalTrades:47,winRate:68.09,totalPnL:12543.75,totalPnLPercent:15.68,avgWin:856.23,avgLoss:-432.18,maxDrawdown:-2456.78,sharpeRatio:1.85,profitFactor:2.34,bestTrade:1850.45,worstTrade:-850.22,consecutiveWins:5,consecutiveLosses:2,dailyReturns:[{date:"2025-01-01",return:2.3},{date:"2025-01-02",return:-.8},{date:"2025-01-03",return:1.5},{date:"2025-01-04",return:3.2},{date:"2025-01-05",return:-1.1},{date:"2025-01-06",return:2.8},{date:"2025-01-07",return:.9}]};return b?e.jsxs(k,{className:"h-full",children:[e.jsx(D,{className:"pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Trading Performance"]})}),e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"h-16 bg-muted rounded"}),e.jsx("div",{className:"h-16 bg-muted rounded"})]}),e.jsx("div",{className:"h-24 bg-muted rounded"})]})})]}):e.jsxs(k,{className:"h-full",children:[e.jsxs(D,{className:"pb-2 flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Trading Performance (",s.timeframe,")"]}),e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"Performance Widget Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Time Frame"}),e.jsxs(_,{value:s.timeframe,onValueChange:i=>m({...s,timeframe:i}),children:[e.jsx(Y,{children:e.jsx(Q,{})}),e.jsxs(X,{children:[e.jsx(L,{value:"7d",children:"Last 7 Days"}),e.jsx(L,{value:"30d",children:"Last 30 Days"}),e.jsx(L,{value:"90d",children:"Last 90 Days"}),e.jsx(L,{value:"1y",children:"Last Year"}),e.jsx(L,{value:"all",children:"All Time"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"show-chart",checked:s.showChart,onCheckedChange:i=>m({...s,showChart:i})}),e.jsx(S,{htmlFor:"show-chart",children:"Show performance chart"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:v,children:"Save"})]})]})]})]})]}),e.jsxs(C,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total P&L"}),e.jsx("div",{className:`text-lg font-bold ${l(n.totalPnL)}`,children:N(n.totalPnL)}),e.jsx("div",{className:`text-xs ${l(n.totalPnLPercent)}`,children:x(n.totalPnLPercent)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Win Rate"}),e.jsxs("div",{className:"text-lg font-bold flex items-center gap-1",children:[e.jsx(G,{className:"h-4 w-4"}),n.winRate.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.totalTrades," trades"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Win"}),e.jsx("div",{className:"font-medium text-green-600 dark:text-green-400",children:N(n.avgWin)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Loss"}),e.jsx("div",{className:"font-medium text-red-600 dark:text-red-400",children:N(Math.abs(n.avgLoss))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Sharpe Ratio"}),e.jsx("div",{className:"font-medium",children:n.sharpeRatio.toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Profit Factor"}),e.jsx("div",{className:"font-medium",children:n.profitFactor.toFixed(2)})]})]}),s.showChart&&n.dailyReturns&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Daily Returns (%)"}),e.jsx("div",{className:"h-16 flex items-end space-x-1",children:n.dailyReturns.slice(-14).map((i,t)=>{const o=Math.max(2,Math.abs(i.return)*5),w=i.return>=0;return e.jsx("div",{className:`flex-1 ${w?"bg-green-500":"bg-red-500"} rounded-sm opacity-80`,style:{height:`${o}px`},title:`${i.date}: ${x(i.return)}`},t)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Recent Activity"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),"Best Trade"]}),e.jsx("div",{className:"font-medium text-green-600 dark:text-green-400",children:N(n.bestTrade)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"Max Drawdown"]}),e.jsx("div",{className:"font-medium text-red-600 dark:text-red-400",children:N(Math.abs(n.maxDrawdown))})]})]})]})]})}function qe({widget:a,onUpdateSettings:f}){const[g,d]=p.useState(!1),[s,m]=p.useState(a.settings),y=()=>{f(s),d(!1)},b=l=>{const u=new Date(l),i=new Date().getTime()-u.getTime(),t=Math.floor(i/6e4),o=Math.floor(t/60);return t<60?`${t}m ago`:o<24?`${o}h ago`:u.toLocaleDateString()},v=l=>({breaking:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100",market:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100",tech:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100",regulation:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100",defi:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",nft:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-100"})[l]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100",x=[{id:"1",title:"Bitcoin ETF Sees Record Inflows This Week",summary:"Institutional adoption continues as Bitcoin ETFs attract significant capital...",category:"market",source:"CryptoNews",publishedAt:new Date(Date.now()-30*6e4).toISOString(),url:"#"},{id:"2",title:"Ethereum 2.0 Staking Rewards Increase",summary:"Network upgrades lead to higher staking yields for validators...",category:"tech",source:"EthHub",publishedAt:new Date(Date.now()-2*60*6e4).toISOString(),url:"#"},{id:"3",title:"DeFi Protocol Launches New Yield Farming Program",summary:"Users can now earn enhanced rewards through liquidity provision...",category:"defi",source:"DeFiPulse",publishedAt:new Date(Date.now()-4*60*6e4).toISOString(),url:"#"},{id:"4",title:"Regulatory Clarity Expected for Crypto Markets",summary:"Government officials hint at comprehensive framework for digital assets...",category:"regulation",source:"RegulatoryWatch",publishedAt:new Date(Date.now()-6*60*6e4).toISOString(),url:"#"},{id:"5",title:"Major NFT Marketplace Announces New Features",summary:"Enhanced trading tools and royalty management coming soon...",category:"nft",source:"NFTInsider",publishedAt:new Date(Date.now()-8*60*6e4).toISOString(),url:"#"}].filter(l=>s.sources.includes("general")||s.sources.includes(l.category)).slice(0,s.limit);return e.jsxs(k,{className:"h-full",children:[e.jsxs(D,{className:"pb-2 flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Crypto News"]}),e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"News Widget Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Number of articles to show"}),e.jsx(te,{type:"number",min:"3",max:"10",value:s.limit,onChange:l=>m({...s,limit:parseInt(l.target.value)||5})})]}),e.jsxs("div",{children:[e.jsx(S,{children:"News Sources"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["general","market","tech","regulation","defi","nft"].map(l=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{id:l,checked:s.sources.includes(l),onCheckedChange:u=>{m(u?{...s,sources:[...s.sources,l]}:{...s,sources:s.sources.filter(n=>n!==l)})}}),e.jsx(S,{htmlFor:l,className:"text-sm capitalize",children:l})]},l))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:y,children:"Save"})]})]})]})]})]}),e.jsx(C,{className:"p-4",children:x.length===0?e.jsxs("div",{className:"text-center text-muted-foreground text-sm py-8",children:[e.jsx(R,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("div",{children:"No news available"})]}):e.jsx("div",{className:"space-y-3",children:x.map(l=>e.jsxs("div",{className:"space-y-2 pb-3 border-b border-border last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(H,{variant:"secondary",className:`${v(l.category)} text-xs`,children:l.category}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(we,{className:"h-3 w-3"}),b(l.publishedAt)]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm leading-tight mb-1",children:l.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:l.summary})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:l.source}),e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:e.jsx(Pe,{className:"h-3 w-3"})})]})]},l.id))})})]})}function ze({widget:a,onUpdateSettings:f}){const[g,d]=p.useState(!1),[s,m]=p.useState(!1),[y,b]=p.useState(""),[v,N]=p.useState(a.settings),{data:x=[],isLoading:l}=O({queryKey:["/api/watchlist"],queryFn:()=>A("GET","/api/watchlist")}),{data:u=[]}=O({queryKey:["/api/tickers/enabled"],queryFn:()=>A("GET","/api/tickers/enabled")}),n=()=>{f(v),d(!1)},i=c=>c>=1?`$${c.toLocaleString(void 0,{maximumFractionDigits:2})}`:`$${c.toFixed(6)}`,t=c=>`${c>=0?"+":""}${c.toFixed(2)}%`,o=c=>c>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",w=[{symbol:"BTCUSDT",name:"Bitcoin",price:67890.45,change24h:2.34,volume24h:285e8},{symbol:"ETHUSDT",name:"Ethereum",price:3456.78,change24h:1.87,volume24h:156e8},{symbol:"SOLUSDT",name:"Solana",price:98.45,change24h:-.92,volume24h:21e8},{symbol:"ADAUSDT",name:"Cardano",price:.4567,change24h:3.21,volume24h:89e7}],r=x.length>0?x:w;return l?e.jsxs(k,{className:"h-full",children:[e.jsx(D,{className:"pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Watchlist"]})}),e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(c=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-20 mb-1"}),e.jsx("div",{className:"h-3 bg-muted rounded w-16"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-16 mb-1"}),e.jsx("div",{className:"h-3 bg-muted rounded w-12"})]})]},c))})})]}):e.jsxs(k,{className:"h-full",children:[e.jsxs(D,{className:"pb-2 flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Watchlist (",r.length,")"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(F,{open:s,onOpenChange:m,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(J,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"Add to Watchlist"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Select Asset"}),e.jsxs(_,{value:y,onValueChange:b,children:[e.jsx(Y,{children:e.jsx(Q,{placeholder:"Choose cryptocurrency"})}),e.jsx(X,{children:u.map(c=>e.jsxs(L,{value:c.symbol,children:[c.name," (",c.symbol.replace("USDT",""),")"]},c.symbol))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(h,{onClick:()=>{m(!1),b("")},disabled:!y,children:"Add to Watchlist"})]})]})]})]}),e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsxs(W,{children:[e.jsx(E,{children:e.jsx(I,{children:"Watchlist Widget Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"show-charts",checked:v.showCharts,onCheckedChange:c=>N({...v,showCharts:c})}),e.jsx(S,{htmlFor:"show-charts",children:"Show mini charts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"compact-view",checked:v.compactView,onCheckedChange:c=>N({...v,compactView:c})}),e.jsx(S,{htmlFor:"compact-view",children:"Compact view"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:n,children:"Save"})]})]})]})]})]})]}),e.jsxs(C,{className:"p-4",children:[r.length===0?e.jsxs("div",{className:"text-center text-muted-foreground text-sm py-8",children:[e.jsx(G,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("div",{children:"No assets in watchlist"}),e.jsx("div",{className:"text-xs mt-1",children:"Add cryptocurrencies to monitor"})]}):e.jsx("div",{className:"space-y-3",children:r.map((c,j)=>e.jsxs("div",{className:"flex items-center gap-3 group",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(H,{variant:"secondary",className:"text-xs",children:c.symbol.replace("USDT","")}),!v.compactView&&e.jsx("div",{className:"min-w-0",children:e.jsx("div",{className:"font-medium text-sm truncate",children:c.name})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-sm",children:i(c.price)}),e.jsxs("div",{className:`flex items-center gap-1 text-xs ${o(c.change24h)}`,children:[c.change24h>=0?e.jsx(z,{className:"h-3 w-3"}):e.jsx(B,{className:"h-3 w-3"}),t(c.change24h)]})]}),e.jsx(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",onClick:()=>{},children:e.jsx(de,{className:"h-3 w-3"})})]},c.symbol))}),v.showCharts&&r.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Price Trends (24h)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.slice(0,4).map(c=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium",children:c.symbol.replace("USDT","")}),e.jsx("div",{className:"h-8 flex items-end space-x-0.5",children:Array.from({length:12},(j,P)=>{const ge=Math.max(2,Math.random()*30+5),pe=Math.random()>.5;return e.jsx("div",{className:`flex-1 ${pe?"bg-green-500":"bg-red-500"} rounded-sm opacity-60`,style:{height:`${ge}px`}},P)})})]},c.symbol))})]})]})]})}const ce=[{type:"price",title:"Price Tracker",icon:Z,description:"Real-time cryptocurrency prices with alerts",defaultSize:"medium",defaultSettings:{ticker:"BTCUSDT",showChart:!0}},{type:"portfolio",title:"Portfolio Overview",icon:ee,description:"Your portfolio balance and performance",defaultSize:"large",defaultSettings:{showAllocation:!0,showPnL:!0}},{type:"signals",title:"Trading Signals",icon:z,description:"Latest buy/sell signals and recommendations",defaultSize:"medium",defaultSettings:{limit:5,autoRefresh:!0}},{type:"alerts",title:"Active Alerts",icon:K,description:"Your price alerts and notifications",defaultSize:"small",defaultSettings:{showOnlyActive:!0}},{type:"market-overview",title:"Market Overview",icon:V,description:"Market trends and top movers",defaultSize:"large",defaultSettings:{categories:["Major","DeFi"],limit:10}},{type:"trading-performance",title:"Trading Performance",icon:se,description:"Your trading statistics and performance metrics",defaultSize:"large",defaultSettings:{timeframe:"30d",showChart:!0}},{type:"news",title:"Crypto News",icon:R,description:"Latest cryptocurrency news and updates",defaultSize:"medium",defaultSettings:{sources:["general"],limit:5}},{type:"watchlist",title:"Watchlist",icon:G,description:"Your favorite cryptocurrencies to monitor",defaultSize:"medium",defaultSettings:{showCharts:!1,compactView:!0}}];function Be(){const[a,f]=p.useState(null),[g,d]=p.useState(!1),[s,m]=p.useState(""),{toast:y}=Se(),b=ke(),{data:v,isLoading:N}=O({queryKey:["/api/dashboard/layout"],queryFn:()=>A("GET","/api/dashboard/layout")}),x=Ce({mutationFn:r=>A("POST","/api/dashboard/layout",r),onSuccess:()=>{b.invalidateQueries({queryKey:["/api/dashboard/layout"]}),y({title:"Dashboard Saved",description:"Your dashboard layout has been saved"})}});p.useEffect(()=>{f(v||{userId:"demo-user",name:"Default Dashboard",isDefault:!0,widgets:[{id:"widget-1",type:"price",title:"BTC Price",position:0,size:"medium",settings:{ticker:"BTCUSDT",showChart:!0},enabled:!0},{id:"widget-2",type:"portfolio",title:"Portfolio",position:1,size:"large",settings:{showAllocation:!0,showPnL:!0},enabled:!0},{id:"widget-3",type:"signals",title:"Trading Signals",position:2,size:"medium",settings:{limit:5,autoRefresh:!0},enabled:!0}]})},[v]);const l=()=>{if(!s||!a)return;const r=ce.find(j=>j.type===s);if(!r)return;const c={id:`widget-${Date.now()}`,type:s,title:r.title,position:a.widgets.length,size:r.defaultSize,settings:r.defaultSettings,enabled:!0};f({...a,widgets:[...a.widgets,c]}),d(!1),m(""),y({title:"Widget Added",description:`${r.title} widget has been added to your dashboard`})},u=r=>{if(!a)return;const c=a.widgets.filter(j=>j.id!==r).map((j,P)=>({...j,position:P}));f({...a,widgets:c}),y({title:"Widget Removed",description:"Widget has been removed from your dashboard"})},n=(r,c)=>{if(!a)return;const j=a.widgets.map(P=>P.id===r?{...P,settings:{...P.settings,...c}}:P);f({...a,widgets:j})},i=r=>{if(!a)return;const c=a.widgets.map(j=>j.id===r?{...j,enabled:!j.enabled}:j);f({...a,widgets:c})},t=()=>{a&&x.mutate(a)},o=r=>{const c={widget:r,onUpdateSettings:j=>n(r.id,j),onRemove:()=>u(r.id),onToggleEnabled:()=>i(r.id)};switch(r.type){case"price":return e.jsx(Le,{...c});case"portfolio":return e.jsx(Ae,{...c});case"signals":return e.jsx(Oe,{...c});case"alerts":return e.jsx(Fe,{...c});case"market-overview":return e.jsx(Me,{...c});case"trading-performance":return e.jsx(Re,{...c});case"news":return e.jsx(qe,{...c});case"watchlist":return e.jsx(ze,{...c});default:return e.jsx(k,{className:"h-full",children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:["Unknown widget type: ",r.type]})})})}},w=r=>{switch(r){case"small":return"col-span-1";case"medium":return"col-span-1 md:col-span-2";case"large":return"col-span-1 md:col-span-3";default:return"col-span-1 md:col-span-2"}};return N?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Trading Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Customize your personal trading insights with widgets"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{open:g,onOpenChange:d,children:[e.jsx($,{asChild:!0,children:e.jsxs(h,{variant:"outline",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Add Widget"]})}),e.jsxs(W,{children:[e.jsxs(E,{children:[e.jsx(I,{children:"Add Widget"}),e.jsx(De,{children:"Choose a widget to add to your dashboard"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Widget Type"}),e.jsxs(_,{value:s,onValueChange:m,children:[e.jsx(Y,{children:e.jsx(Q,{placeholder:"Select widget type"})}),e.jsx(X,{children:ce.map(r=>e.jsx(L,{value:r.type,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r.icon,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.description})]})]})},r.type))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{onClick:l,disabled:!s,children:"Add Widget"})]})]})]})]}),e.jsxs(h,{onClick:t,disabled:x.isPending,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Save Layout"]})]})]}),a&&a.widgets&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.widgets.sort((r,c)=>r.position-c.position).map(r=>e.jsx("div",{className:w(r.size),children:e.jsxs("div",{className:"relative group h-full",children:[e.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"h-6 w-6 flex items-center justify-center",children:e.jsx(U,{checked:r.enabled,onCheckedChange:()=>i(r.id),className:"h-3 w-6"})}),e.jsx(h,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>u(r.id),children:e.jsx(de,{className:"h-3 w-3"})})]})}),r.enabled?o(r):e.jsx(k,{className:"h-full opacity-50",children:e.jsx(C,{className:"p-4 flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("div",{className:"font-medium",children:r.title}),e.jsx("div",{className:"text-sm",children:"Widget disabled"})]})})})]})},r.id))}),a&&a.widgets&&a.widgets.length===0&&e.jsx(k,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Widgets Added"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Start building your personalized trading dashboard by adding widgets"}),e.jsxs(h,{onClick:()=>d(!0),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Add Your First Widget"]})]})})]})}function rs(){return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx(Be,{})})}export{rs as default};
//# sourceMappingURL=dashboard-widgets-Dxuj-1hB.js.map
