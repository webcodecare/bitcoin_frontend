import{j as e}from"./ui-vendor-mfLK6kkQ.js";import{E as c,l as u,u as m,a as l,P as p}from"./index-7LWdN5Ff.js";import{r as n}from"./react-vendor--0RGCJ5T.js";import{f as d,b as f}from"./index-DMUxz8dE.js";import"./chart-vendor-CJvGuOij.js";throw new Error("Missing required Stripe key: VITE_STRIPE_PUBLIC_KEY");const b=u(""),S=()=>{const r=m(),s=l(),{toast:t}=f(),o=async a=>{if(a.preventDefault(),!r||!s)return;const{error:i}=await r.confirmPayment({elements:s,confirmParams:{return_url:window.location.origin}});t(i?{title:"Payment Failed",description:i.message,variant:"destructive"}:{title:"Payment Successful",description:"You are subscribed!"})};return e.jsxs("form",{onSubmit:o,children:[e.jsx(p,{}),e.jsx("button",{type:"submit",children:"Subscribe"})]})};function y(){const[r,s]=n.useState("");return n.useEffect(()=>{d("POST","/api/get-or-create-subscription").then(t=>t.json()).then(t=>{s(t.clientSecret)})},[]),r?e.jsx(c,{stripe:b,options:{clientSecret:r},children:e.jsx(S,{})}):e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full","aria-label":"Loading"})})}export{y as default};
//# sourceMappingURL=subscribe-Dv5BGlgD.js.map
