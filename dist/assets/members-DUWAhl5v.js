import{j as e}from"./ui-vendor-mfLK6kkQ.js";import{d as S,l as K,T as k,s as Z,u as G,aa as I,j as v,k as w,q as D,g as u,L as g,C,B as T,Z as M,n as U,o as W,ab as Q,t as J}from"./index-DMUxz8dE.js";import{r as f}from"./react-vendor--0RGCJ5T.js";import{A as X}from"./activity-Dkd0t9nU.js";import Y from"./HeatmapChart-D58HunIG.js";import"./chart-vendor-CJvGuOij.js";function _({symbol:c,height:j=400,className:A=""}){const E=f.useRef(null),[s,H]=f.useState([]),[q,L]=f.useState(!0),{data:o,isLoading:$}=S({queryKey:[`/api/public/market/price/${c}`],refetchInterval:5e3}),{data:m,isLoading:F}=S({queryKey:[`/api/public/ohlc?symbol=${c}&interval=1w&limit=104`],refetchInterval:3e4}),{data:h}=S({queryKey:[`/api/public/signals/alerts?ticker=${c}&timeframe=1W`],refetchInterval:1e4});if(f.useEffect(()=>{L($||F)},[$,F]),f.useEffect(()=>{if(m&&Array.isArray(m)){const d=m.map(t=>({time:new Date(t.openTime).toISOString(),price:parseFloat(t.close)}));H(d),L(!1),console.log("Data loaded:",{ohlc:d.length,signals:(h==null?void 0:h.length)||0,price:o==null?void 0:o.price})}else m&&!Array.isArray(m)&&console.error("Failed to initialize TradingView chart:",m)},[m,h,o]),q||s.length===0)return e.jsx("div",{className:`bg-card border border-border rounded-lg p-4 flex items-center justify-center ${A}`,style:{height:`${j}px`},children:e.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[e.jsx(X,{className:"w-4 h-4 animate-pulse"}),e.jsx("span",{children:"Loading chart data..."})]})});f.useEffect(()=>{const d=E.current;if(!d||s.length===0)return;const t=d.getContext("2d");if(!t)return;const i=d.getBoundingClientRect(),y=window.devicePixelRatio||1;if(d.width=i.width*y,d.height=i.height*y,t.scale(y,y),t.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--card")||"#1e1e2e",t.fillRect(0,0,i.width,i.height),s.length<2)return;const R=s.map(a=>a.price),N=Math.min(...R),V=Math.max(...R),b=V-N||1,r=60,B=i.width-2*r,x=i.height-2*r;t.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--border")||"#374151",t.lineWidth=1;for(let a=0;a<=5;a++){const l=r+x*a/5;t.beginPath(),t.moveTo(r,l),t.lineTo(i.width-r,l),t.stroke();const n=V-b*a/5;t.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--muted-foreground")||"#9CA3AF",t.font="12px Inter, sans-serif",t.textAlign="right",t.fillText(`$${n.toLocaleString(void 0,{maximumFractionDigits:2})}`,r-10,l+4)}t.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"#3B82F6",t.lineWidth=2,t.beginPath(),s.forEach((a,l)=>{const n=r+B*l/(s.length-1),p=r+x-(a.price-N)/b*x;l===0?t.moveTo(n,p):t.lineTo(n,p)}),t.stroke();const O=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"59 130 246";if(t.fillStyle=`hsla(${O}, 0.1)`,t.beginPath(),s.forEach((a,l)=>{const n=r+B*l/(s.length-1),p=r+x-(a.price-N)/b*x;l===0?t.moveTo(n,p):t.lineTo(n,p)}),t.lineTo(i.width-r,i.height-r),t.lineTo(r,i.height-r),t.closePath(),t.fill(),s.length>0){const a=s[s.length-1],l=i.width-r,n=r+x-(a.price-N)/b*x;t.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--primary")||"#3B82F6",t.beginPath(),t.arc(l,n,4,0,2*Math.PI),t.fill()}},[s]);const z=(o==null?void 0:o.price)||(s.length>0?s[s.length-1].price:0),P=s.length>=2?(s[s.length-1].price-s[s.length-2].price)/s[s.length-2].price*100:0;return e.jsxs("div",{className:`bg-card border border-border rounded-lg overflow-hidden ${A}`,children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:c}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Weekly Analysis"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",z.toLocaleString(void 0,{maximumFractionDigits:2})]}),e.jsxs("div",{className:`flex items-center text-sm ${P>=0?"text-green-500":"text-red-500"}`,children:[P>=0?e.jsx(k,{className:"w-4 h-4 mr-1"}):e.jsx(Z,{className:"w-4 h-4 mr-1"}),Math.abs(P).toFixed(2),"%"]})]})]})}),e.jsxs("div",{className:"relative",style:{height:`${j}px`},children:[e.jsx("canvas",{ref:E,className:"w-full h-full",style:{width:"100%",height:"100%"}}),h&&h.length>0&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs("div",{className:"bg-background/80 backdrop-blur-sm rounded-lg px-2 py-1 text-xs text-muted-foreground",children:[h.length," signals"]})})]})]})}function le(){const{user:c,isAuthenticated:j}=G();return j?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(I,{}),e.jsx("section",{className:"py-16 bg-gradient-to-r from-background to-muted/20",children:e.jsxs("div",{className:"container px-4 mx-auto text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(C,{className:"h-8 w-8 text-yellow-500 mr-2"}),e.jsx(T,{variant:"secondary",className:"text-lg px-4 py-1",children:"Members Area"})]}),e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Welcome Back, ",e.jsx("span",{className:"crypto-gradient bg-clip-text text-transparent",children:(c==null?void 0:c.firstName)||"Trader"})]}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Access your limited dashboard and essential trading tools"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(u,{asChild:!0,size:"lg",className:"crypto-gradient text-white",children:e.jsxs(g,{href:"/dashboard",children:[e.jsx(M,{className:"mr-2 h-5 w-5"}),"Full Dashboard"]})}),e.jsx(u,{asChild:!0,variant:"outline",size:"lg",children:e.jsxs(g,{href:"/pricing",children:[e.jsx(C,{className:"mr-2 h-5 w-5"}),"Upgrade Plan"]})})]})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container px-4 mx-auto",children:e.jsxs("div",{className:"grid gap-8",children:[e.jsxs(v,{children:[e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(W,{className:"flex items-center",children:[e.jsx(k,{className:"mr-2 h-5 w-5"}),"Bitcoin Price Chart"]}),e.jsx(T,{variant:"secondary",children:"Limited View"})]})}),e.jsxs(w,{children:[e.jsx(_,{symbol:"BTCUSDT",height:300,showSignals:!1}),e.jsx("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upgrade to Pro to see buy/sell signals and advanced indicators"})})]})]}),e.jsxs(v,{children:[e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"200-Week Heatmap (Sample)"}),e.jsx(T,{variant:"secondary",children:"Preview Only"})]})}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Y,{symbol:"BTC"}),e.jsx("div",{className:"absolute inset-0 bg-background/80 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(D,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Upgrade Required"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Full heatmap analysis available with Pro plan"}),e.jsx(u,{asChild:!0,className:"crypto-gradient text-white",children:e.jsxs(g,{href:"/pricing",children:["Upgrade Now",e.jsx(Q,{className:"ml-2 h-4 w-4"})]})})]})})]})})]}),e.jsx(v,{className:"bg-gradient-to-r from-primary/10 to-secondary/10 border-primary/20",children:e.jsxs(w,{className:"p-8 text-center",children:[e.jsx(J,{className:"h-16 w-16 mx-auto mb-6 text-primary"}),e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready for Full Access?"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Unlock all features including real-time signals, advanced analytics, cycle forecasting, and priority alerts"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"crypto-gradient w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(k,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Real-time Signals"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get instant buy/sell alerts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"crypto-gradient w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(M,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete heatmap & forecasting"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"crypto-gradient w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(C,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Priority Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Direct access to our team"})]})]}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(u,{asChild:!0,size:"lg",className:"crypto-gradient text-white",children:e.jsxs(g,{href:"/pricing",children:[e.jsx(C,{className:"mr-2 h-5 w-5"}),"View Plans"]})}),e.jsx(u,{asChild:!0,variant:"outline",size:"lg",children:e.jsx(g,{href:"/dashboard",children:"Try Dashboard"})})]})]})})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(I,{}),e.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:e.jsx(v,{className:"w-full max-w-md",children:e.jsxs(w,{className:"p-8 text-center",children:[e.jsx(D,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Members Only"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Please sign in to access the members area"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(u,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsx(g,{href:"/auth",children:"Sign In"})}),e.jsx(u,{asChild:!0,className:"flex-1 crypto-gradient text-white",children:e.jsx(g,{href:"/pricing",children:"View Plans"})})]})]})})})]})}export{le as default};
//# sourceMappingURL=members-DUWAhl5v.js.map
