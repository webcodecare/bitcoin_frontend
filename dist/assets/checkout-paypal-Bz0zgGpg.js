import{j as e}from"./ui-vendor-mfLK6kkQ.js";import{r as u}from"./react-vendor--0RGCJ5T.js";import{a1 as P,aa as C,g as S,j,n as b,o as f,S as h,k as w,B as N,ae as k,ah as v,ac as E}from"./index-DMUxz8dE.js";import{A as B}from"./arrow-left-N6ddEzRW.js";import"./chart-vendor-CJvGuOij.js";function T({amount:c,currency:t,intent:x}){const i=async()=>({orderId:(await(await fetch("/paypal/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:c,currency:t,intent:x})})).json()).id}),n=async a=>await(await fetch(`/paypal/order/${a}/capture`,{method:"POST",headers:{"Content-Type":"application/json"}})).json(),l=async a=>{console.log("onApprove",a);const s=await n(a.orderId);console.log("Capture result",s)},o=async a=>{console.log("onCancel",a)},d=async a=>{console.log("onError",a)};u.useEffect(()=>{(async()=>{try{if(window.paypal)await y();else{const s=document.createElement("script");s.src="https://www.paypal.com/web-sdk/v6/core",s.async=!0,s.onload=()=>y(),document.body.appendChild(s)}}catch(s){console.error("Failed to load PayPal SDK",s)}})()},[]);const y=async()=>{try{const a=await fetch("/paypal/setup").then(r=>r.json()).then(r=>r.clientToken),p=(await window.paypal.createInstance({clientToken:a,components:["paypal-payments"]})).createPayPalOneTimePaymentSession({onApprove:l,onCancel:o,onError:d}),g=async()=>{try{const r=i();await p.start({paymentFlow:"auto"},r)}catch(r){console.error(r)}},m=document.getElementById("paypal-button");return m&&m.addEventListener("click",g),()=>{m&&m.removeEventListener("click",g)}}catch(a){console.error(a)}};return e.jsx("paypal-button",{id:"paypal-button"})}const A={basic:{name:"Basic Plan",price:49,features:["Real-time price data","Basic trading signals","Email notifications","Up to 3 watchlist items","Mobile app access"],tier:"basic"},pro:{name:"Pro Plan",price:99,features:["Everything in Basic","Advanced trading signals","SMS & Email notifications","Up to 10 watchlist items","Advanced analytics dashboard","Technical indicators"],tier:"pro"},elite:{name:"Elite Plan",price:199,features:["Everything in Pro","Unlimited watchlist items","Custom trading indicators","Telegram notifications","Advanced cycle forecasting","200-week heatmap analysis"],tier:"elite"}};function Y(){const[,c]=P(),[t,x]=u.useState(null);if(u.useEffect(()=>{const n=new URLSearchParams(window.location.search),l=n.get("plan"),o=n.get("amount"),d=n.get("billing");l&&o&&d?x({plan:l,amount:o,billing:d}):c("/pricing")},[c]),!t)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});const i=A[t.plan];return i?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(C,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(S,{variant:"ghost",onClick:()=>c("/pricing"),className:"mb-4 text-gray-300 hover:text-white hover:bg-slate-700",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Back to Pricing"]}),e.jsx("h1",{className:"text-3xl font-bold mb-2 text-white",children:"Complete Your Purchase"}),e.jsx("p",{className:"text-gray-300",children:"Secure checkout powered by PayPal"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(j,{className:"bg-slate-800 border-slate-700",children:[e.jsx(b,{children:e.jsxs(f,{className:"flex items-center gap-2 text-white",children:[e.jsx(h,{className:"h-5 w-5 text-green-500"}),"Order Summary"]})}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-white",children:i.name}),e.jsx(N,{variant:"secondary",className:"mt-1 bg-slate-700 text-gray-300",children:t.billing==="yearly"?"Annual Billing":"Monthly Billing"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",t.amount]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["/",t.billing==="yearly"?"year":"month"]})]})]}),e.jsxs("div",{className:"border-t border-slate-600 pt-4",children:[e.jsx("h4",{className:"font-medium mb-3 text-white",children:"What you get:"}),e.jsx("ul",{className:"space-y-2",children:i.features.map((n,l)=>e.jsxs("li",{className:"flex items-start text-sm text-gray-300",children:[e.jsx(k,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),n]},l))})]}),t.billing==="yearly"&&e.jsx("div",{className:"bg-green-900/20 border border-green-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center text-green-300",children:[e.jsx(N,{className:"bg-green-500 text-white mr-2",children:"Save 20%"}),e.jsxs("span",{className:"text-sm font-medium",children:["You're saving $",i.price*12-parseInt(t.amount)," annually"]})]})})]})]}),e.jsxs(j,{className:"bg-slate-800 border-slate-700",children:[e.jsx(b,{children:e.jsxs(f,{className:"flex items-center gap-2 text-white",children:[e.jsx(v,{className:"h-5 w-5 text-blue-500"}),"Payment Method"]})}),e.jsx(w,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Pay securely with PayPal. You can use your PayPal account or pay with a credit/debit card."})}),e.jsx("div",{className:"bg-slate-700 p-6 rounded-lg text-center",children:e.jsx(T,{amount:t.amount,currency:"USD",intent:"CAPTURE"})}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(h,{className:"h-5 w-5 text-blue-400 mr-2 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-300 mb-1",children:"Secure Payment"}),e.jsx("p",{className:"text-blue-200",children:"Your payment is processed securely by PayPal. We never store your payment information."})]})]})}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-2",children:[e.jsx("p",{children:"By completing your purchase, you agree to our Terms of Service and Privacy Policy."}),e.jsx("p",{children:"Your subscription will automatically renew unless cancelled. You can manage your subscription in your account settings."})]})]})})]})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"flex justify-center items-center gap-8 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-4 w-4"}),"SSL Secured"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4"}),"PayPal Certified"]}),e.jsx("div",{children:"30-Day Money Back Guarantee"})]})})]})}),e.jsx(E,{})]}):(c("/pricing"),null)}export{Y as default};
//# sourceMappingURL=checkout-paypal-Bz0zgGpg.js.map
