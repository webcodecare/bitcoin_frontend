import{j as e}from"./ui-vendor-mfLK6kkQ.js";import{r as B}from"./react-vendor--0RGCJ5T.js";import{b as X,a as Y,a0 as Z,d as g,e as K,aa as _,g as u,B as l,Z as V,j as i,k as r,T as J,m as ee,n as h,o as j,ac as se,w as ae,O as te,ad as ie}from"./index-DMUxz8dE.js";import{T as re,a as le,b as f,c as N}from"./tabs-CFs29E2A.js";import{P as ne}from"./progress-DmVvbdU4.js";import{S as ce}from"./Sidebar-CWwWAgFd.js";import{T as de,a as oe,b as q,c as n,d as me,e as c}from"./table-C5Wewpyf.js";import{A as xe}from"./activity-Dkd0t9nU.js";import{R as E}from"./refresh-cw-CQdY5ta9.js";import{S as he}from"./send-y-4Jk6HA.js";import{C as $}from"./circle-check-big-DJe8srSt.js";import{C as L}from"./circle-x-CG5ILRXV.js";import{G as je}from"./globe-CBooLoLC.js";import{R as b,a as ue,b as fe,C as pe,T as w,L as T,B as ve,d as P,X as F,Y as H,e as M,f as ye,g as p}from"./chart-vendor-CJvGuOij.js";import{D as ge}from"./download-DAUaHPRv.js";import{M as z}from"./message-square-DEryHNXU.js";import{S as Ne}from"./smartphone-BAgSRykf.js";import"./dollar-sign-BsbVyGJM.js";import"./file-text-CVGYDGjh.js";function Ie(){const{toast:v}=X(),C=Y(),t=Z.get(),[S,be]=B.useState("24h"),[y,G]=B.useState("all"),d=async(s,m,Te)=>{if(!t)throw new Error("Authentication required");const x=await fetch(m,{method:s,headers:{Authorization:`Bearer ${t}`},body:void 0});if(!x.ok){const W=await x.json().catch(()=>({}));throw new Error(W.message||`${x.status}: ${x.statusText}`)}return x.json()},{data:a,isLoading:we}=g({queryKey:["/api/notifications/stats",t,S],queryFn:()=>d("GET",`/api/notifications/stats?range=${S}`),enabled:!!t,refetchInterval:3e4});g({queryKey:["/api/notifications/logs",t,y],queryFn:()=>d("GET",`/api/notifications/logs?channel=${y}&limit=100`),enabled:!!t,refetchInterval:1e4}),g({queryKey:["/api/notifications/health",t],queryFn:()=>d("GET","/api/notifications/health"),enabled:!!t,refetchInterval:15e3});const R=K({mutationFn:s=>d("POST",`/api/notifications/${s}/retry`),onSuccess:()=>{v({title:"Notification Retry",description:"Notification has been queued for retry"}),C.invalidateQueries({queryKey:["/api/notifications/logs",t]})}}),D=K({mutationFn:s=>d("POST",`/api/notifications/test/${s}`),onSuccess:(s,m)=>{v({title:"Test Sent",description:`Test notification sent via ${m}`})}}),U=s=>{switch(s){case"delivered":return"text-green-600";case"sent":return"text-blue-600";case"pending":return"text-yellow-600";case"failed":return"text-red-600";case"bounced":return"text-orange-600";default:return"text-gray-600"}},k=s=>{switch(s){case"email":return e.jsx(te,{className:"h-4 w-4"});case"sms":return e.jsx(Ne,{className:"h-4 w-4"});case"telegram":return e.jsx(z,{className:"h-4 w-4"});case"discord":return e.jsx(z,{className:"h-4 w-4"});default:return e.jsx(ae,{className:"h-4 w-4"})}},I=s=>{switch(s){case"healthy":return e.jsxs(l,{variant:"outline",className:"text-green-600",children:[e.jsx($,{className:"h-3 w-3 mr-1"}),"Healthy"]});case"degraded":return e.jsxs(l,{variant:"outline",className:"text-yellow-600",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),"Degraded"]});case"down":return e.jsxs(l,{variant:"outline",className:"text-red-600",children:[e.jsx(L,{className:"h-3 w-3 mr-1"}),"Down"]});default:return e.jsx(l,{variant:"outline",children:"Unknown"})}},o={totalSent:1247,deliveryRate:94.2,avgDeliveryTime:2.3,failureRate:5.8,channelBreakdown:{email:{sent:856,delivered:812,failed:44},sms:{sent:234,delivered:229,failed:5},telegram:{sent:123,delivered:119,failed:4},discord:{sent:34,delivered:32,failed:2}}},O=[{name:"Email",sent:856,delivered:812,failed:44},{name:"SMS",sent:234,delivered:229,failed:5},{name:"Telegram",sent:123,delivered:119,failed:4},{name:"Discord",sent:34,delivered:32,failed:2}],A=[{name:"Delivered",value:94.2,color:"#10b981"},{name:"Failed",value:5.8,color:"#ef4444"}],Q=[{time:"00:00",email:45,sms:12,telegram:8,discord:3},{time:"04:00",email:52,sms:18,telegram:11,discord:2},{time:"08:00",email:89,sms:28,telegram:15,discord:5},{time:"12:00",email:134,sms:45,telegram:23,discord:8},{time:"16:00",email:167,sms:52,telegram:28,discord:12},{time:"20:00",email:198,sms:41,telegram:19,discord:6}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(_,{}),e.jsxs("div",{className:"flex",children:[e.jsx(ce,{}),e.jsxs("div",{className:"ml-64 flex-1",children:[e.jsx("header",{className:"bg-card border-b border-border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xe,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Notification Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Multi-channel delivery monitoring and analytics"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{C.invalidateQueries({queryKey:["/api/notifications"]}),v({title:"Dashboard Refreshed",description:"Latest data loaded"})},children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(l,{variant:"outline",className:"text-blue-400",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),"Real-time"]})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(i,{children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Sent"}),e.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalSent)||o.totalSent})]}),e.jsx(he,{className:"h-8 w-8 text-blue-500"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(J,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-600",children:"+12% from yesterday"})]})]})}),e.jsx(i,{children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Delivery Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(a==null?void 0:a.deliveryRate)||o.deliveryRate,"%"]})]}),e.jsx($,{className:"h-8 w-8 text-green-500"})]}),e.jsx(ne,{value:(a==null?void 0:a.deliveryRate)||o.deliveryRate,className:"mt-2"})]})}),e.jsx(i,{children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Delivery Time"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(a==null?void 0:a.avgDeliveryTime)||o.avgDeliveryTime,"s"]})]}),e.jsx(ee,{className:"h-8 w-8 text-yellow-500"})]}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:"↓ 0.2s faster than average"})})]})}),e.jsx(i,{children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Failure Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(a==null?void 0:a.failureRate)||o.failureRate,"%"]})]}),e.jsx(L,{className:"h-8 w-8 text-red-500"})]}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsx("span",{className:"text-sm text-red-600",children:"↑ 0.3% from yesterday"})})]})})]}),e.jsxs(i,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(je,{className:"h-5 w-5"}),e.jsx("span",{children:"Channel Health Status"})]})}),e.jsx(r,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:["email","sms","telegram","discord"].map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[k(s),e.jsx("span",{className:"font-semibold capitalize",children:s})]}),I("healthy")]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Uptime:"}),e.jsx("span",{className:"font-medium",children:"99.9%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rate Limit:"}),e.jsx(l,{variant:"outline",className:"text-green-600",children:"Normal"})]}),e.jsx(u,{size:"sm",variant:"outline",className:"w-full mt-2",onClick:()=>D.mutate(s),disabled:D.isPending,children:"Test Channel"})]})]},s))})})]}),e.jsxs(re,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(le,{className:"grid w-full grid-cols-4",children:[e.jsx(f,{value:"overview",children:"Overview"}),e.jsx(f,{value:"channels",children:"By Channel"}),e.jsx(f,{value:"timeline",children:"Timeline"}),e.jsx(f,{value:"logs",children:"Activity Logs"})]}),e.jsx(N,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsx(h,{children:e.jsx(j,{children:"Delivery Success Rate"})}),e.jsx(r,{children:e.jsx(b,{width:"100%",height:300,children:e.jsxs(ue,{children:[e.jsx(fe,{data:A,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"value",children:A.map((s,m)=>e.jsx(pe,{fill:s.color},`cell-${m}`))}),e.jsx(w,{formatter:s=>`${s}%`}),e.jsx(T,{})]})})})]}),e.jsxs(i,{children:[e.jsx(h,{children:e.jsx(j,{children:"Channel Performance"})}),e.jsx(r,{children:e.jsx(b,{width:"100%",height:300,children:e.jsxs(ve,{data:O,children:[e.jsx(P,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name"}),e.jsx(H,{}),e.jsx(w,{}),e.jsx(T,{}),e.jsx(M,{dataKey:"delivered",fill:"#10b981",name:"Delivered"}),e.jsx(M,{dataKey:"failed",fill:"#ef4444",name:"Failed"})]})})})]})]})}),e.jsx(N,{value:"timeline",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(h,{children:e.jsx(j,{children:"24-Hour Delivery Timeline"})}),e.jsx(r,{children:e.jsx(b,{width:"100%",height:400,children:e.jsxs(ye,{data:Q,children:[e.jsx(P,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"time"}),e.jsx(H,{}),e.jsx(w,{}),e.jsx(T,{}),e.jsx(p,{type:"monotone",dataKey:"email",stroke:"#3b82f6",strokeWidth:2}),e.jsx(p,{type:"monotone",dataKey:"sms",stroke:"#10b981",strokeWidth:2}),e.jsx(p,{type:"monotone",dataKey:"telegram",stroke:"#8b5cf6",strokeWidth:2}),e.jsx(p,{type:"monotone",dataKey:"discord",stroke:"#f59e0b",strokeWidth:2})]})})})]})}),e.jsx(N,{value:"logs",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{children:"Recent Notification Activity"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:y,onChange:s=>G(s.target.value),className:"px-3 py-1 border rounded text-sm",children:[e.jsx("option",{value:"all",children:"All Channels"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"discord",children:"Discord"})]}),e.jsxs(u,{size:"sm",variant:"outline",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),e.jsx(r,{children:e.jsxs(de,{children:[e.jsx(oe,{children:e.jsxs(q,{children:[e.jsx(n,{children:"Channel"}),e.jsx(n,{children:"Recipient"}),e.jsx(n,{children:"Subject"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Sent At"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(me,{children:[{id:"1",type:"email",recipient:"user@example.com",subject:"BTC Buy Signal Alert",status:"delivered",sentAt:"2025-01-07 22:00:15",alertType:"buy",ticker:"BTCUSDT"},{id:"2",type:"sms",recipient:"+1234567890",subject:"ETH Sell Signal",status:"sent",sentAt:"2025-01-07 21:58:42",alertType:"sell",ticker:"ETHUSDT"},{id:"3",type:"telegram",recipient:"123456789",subject:"Price Alert: BTC > $65,000",status:"failed",sentAt:"2025-01-07 21:55:12",alertType:"price_alert",ticker:"BTCUSDT"}].map(s=>e.jsxs(q,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[k(s.type),e.jsx("span",{className:"capitalize",children:s.type})]})}),e.jsx(c,{className:"font-mono text-sm",children:s.recipient}),e.jsx(c,{children:s.subject}),e.jsx(c,{children:e.jsx(l,{variant:"outline",className:U(s.status),children:s.status})}),e.jsx(c,{className:"text-sm text-muted-foreground",children:s.sentAt}),e.jsx(c,{children:s.status==="failed"&&e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>R.mutate(s.id),disabled:R.isPending,children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),"Retry"]})})]},s.id))})]})})]})})]})]})]})]}),e.jsx(se,{})]})}export{Ie as default};
//# sourceMappingURL=notification-dashboard-BQNeyM6y.js.map
