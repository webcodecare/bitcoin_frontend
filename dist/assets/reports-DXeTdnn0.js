import{j as e}from"./ui-vendor-mfLK6kkQ.js";import{r as y}from"./react-vendor--0RGCJ5T.js";import{b as E,d as q,e as b,g as w,j as a,n as o,o as m,p as x,k as r,I as R,J as C,l as S,U as T,T as u,Z as F,B as l,f as D,aq as M}from"./index-DMUxz8dE.js";import{S as _}from"./Sidebar-CWwWAgFd.js";import{T as B,a as $,b as p,c as h}from"./tabs-CFs29E2A.js";import{D as z}from"./download-DAUaHPRv.js";import{D as U}from"./dollar-sign-BsbVyGJM.js";import{A as H}from"./activity-Dkd0t9nU.js";import{C as I}from"./calendar-CAkEv8Jh.js";import"./chart-vendor-CJvGuOij.js";import"./message-square-DEryHNXU.js";import"./file-text-CVGYDGjh.js";function ae(){const[j,A]=y.useState("user_activity"),[n,g]=y.useState({start:"",end:""}),{toast:d}=E(),{data:f=[],isLoading:G}=q({queryKey:["/api/admin/reports"]}),c=b({mutationFn:async s=>(await D("POST","/api/admin/reports/generate",s)).json(),onSuccess:()=>{M.invalidateQueries({queryKey:["/api/admin/reports"]}),d({title:"Report Generated",description:"Your report has been generated successfully."})},onError:s=>{d({title:"Generation Failed",description:s.message||"Failed to generate report",variant:"destructive"})}}),v=b({mutationFn:async s=>(await D("GET",`/api/admin/reports/${s}/download`)).blob(),onSuccess:(s,t)=>{const N=window.URL.createObjectURL(s),i=document.createElement("a");i.href=N,i.download=`report-${t}.xlsx`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(N),document.body.removeChild(i),d({title:"Download Started",description:"Your report is being downloaded."})}}),k=()=>{if(!n.start||!n.end){d({title:"Date Range Required",description:"Please select both start and end dates.",variant:"destructive"});return}c.mutate({type:j,dateRange:n,format:"xlsx"})},L=[{value:"user_activity",label:"User Activity Report",icon:T,description:"User login patterns, session durations, feature usage"},{value:"signal_analytics",label:"Signal Analytics",icon:u,description:"Raw TradingView signal accuracy, delivery rates, timeframe analysis"},{value:"subscription_trends",label:"Subscription Trends",icon:S,description:"Plan upgrades, downgrades, churn analysis, retention metrics"},{value:"revenue_analytics",label:"Revenue Analytics",icon:U,description:"Payment trends, MRR, subscription revenue forecasts"}],P=s=>{switch(s){case"generating":return e.jsx(l,{variant:"secondary",children:"Generating..."});case"ready":return e.jsx(l,{variant:"default",children:"Ready"});case"expired":return e.jsx(l,{variant:"destructive",children:"Expired"});default:return e.jsx(l,{variant:"outline",children:"Unknown"})}};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"flex",children:[e.jsx(_,{}),e.jsxs("div",{className:"ml-0 lg:ml-64 flex-1",children:[e.jsx("header",{className:"bg-card border-b border-border p-4 lg:p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Reports & Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate and download comprehensive platform reports"})]}),e.jsx(w,{onClick:k,disabled:c.isPending,children:c.isPending?"Generating...":"Generate Report"})]})}),e.jsx("div",{className:"p-4 lg:p-6 space-y-6",children:e.jsxs(B,{defaultValue:"generate",className:"space-y-4",children:[e.jsxs($,{children:[e.jsx(p,{value:"generate",children:"Generate New Report"}),e.jsx(p,{value:"history",children:"Report History"}),e.jsx(p,{value:"analytics",children:"Quick Analytics"})]}),e.jsx(h,{value:"generate",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Report Configuration"}),e.jsx(x,{children:"Configure and generate downloadable reports"})]}),e.jsxs(r,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.map(s=>{const t=s.icon;return e.jsx(a,{className:`cursor-pointer transition-colors ${j===s.value?"border-primary bg-primary/5":""}`,onClick:()=>A(s.value),children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(t,{className:"h-5 w-5 mt-0.5 text-primary"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]})})},s.value)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"start-date",children:"Start Date"}),e.jsx(C,{id:"start-date",type:"date",value:n.start,onChange:s=>g(t=>({...t,start:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"end-date",children:"End Date"}),e.jsx(C,{id:"end-date",type:"date",value:n.end,onChange:s=>g(t=>({...t,end:s.target.value}))})]})]})]})]})}),e.jsx(h,{value:"history",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Generated Reports"}),e.jsx(x,{children:"Download previously generated reports"})]}),e.jsx(r,{children:G?e.jsx("div",{className:"space-y-2",children:[1,2,3].map(s=>e.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse"},s))}):f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(S,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No reports generated yet"})]}):e.jsx("div",{className:"space-y-2",children:f.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Generated: ",new Date(s.generatedAt).toLocaleDateString()]}),e.jsxs("span",{children:["Size: ",s.fileSize]}),P(s.status)]})]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>v.mutate(s.id),disabled:s.status!=="ready"||v.isPending,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Download"]})]},s.id))})})]})}),e.jsxs(h,{value:"analytics",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(a,{children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold",children:"1,247"})]}),e.jsx(T,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"+12% from last month"})]})}),e.jsx(a,{children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Subscriptions"}),e.jsx("p",{className:"text-2xl font-bold",children:"892"})]}),e.jsx(u,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"+8% from last month"})]})}),e.jsx(a,{children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Signals Sent"}),e.jsx("p",{className:"text-2xl font-bold",children:"15,432"})]}),e.jsx(F,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"+24% from last month"})]})}),e.jsx(a,{children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:"$24,891"})]}),e.jsx(U,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"+15% from last month"})]})})]}),e.jsxs(a,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Platform Health"}),e.jsx(x,{children:"Real-time system metrics and performance indicators"})]}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(H,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"System Status"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All systems operational"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(I,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Uptime"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"99.9% (30 days)"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(u,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Response Time"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"< 200ms average"})]})]})})]})]})]})})]})]})})}export{ae as default};
//# sourceMappingURL=reports-DXeTdnn0.js.map
